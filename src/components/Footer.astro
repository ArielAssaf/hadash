---
import siteSettings from "../data/site-settings.json";

interface Props {
  lang: string;
}

const { lang } = Astro.props;
const definitions =
  siteSettings[lang as keyof typeof siteSettings] || siteSettings["en"];
const dir = ["he", "ar"].includes(lang) ? "rtl" : "ltr";

// Social Media Links
const socialLinks = [
  { icon: "fa-brands fa-tiktok", href: "https://www.tiktok.com/@hadash.front" },
  { icon: "fa-brands fa-twitter", href: "https://x.com/Hadash_org" },
  {
    icon: "fa-brands fa-instagram",
    href: "https://www.instagram.com/hadash.front/?hl=he",
  },
  {
    icon: "fa-brands fa-facebook-f",
    href: "https://www.facebook.com/hadash.org.il",
  },
];

// Content for the specific buttons (Localized placeholders)
const resourceButtons = {
  maki: {
    label:
      lang === "en"
        ? "Maki Website"
        : lang === "ru"
          ? "Сайт МАКИ"
          : lang === "ar"
            ? "موقع الحزب"
            : "לאתר מק״י",
    href: "https://maki.org.il/",
  },
  zoha: {
    label:
      lang === "en"
        ? "Zo HaDerekh"
        : lang === "ru"
          ? "Зо Хадерех"
          : lang === "ar"
            ? "طريقنا"
            : "זו הדרך",
    sub: lang === "en" ? "The Path" : "",
    href: "https://zoha.org.il",
  },
  official: {
    label: definitions.footerLinks.official,
    href: "https://hadash.org.il",
  },
};
---

<footer class="bg-[#051F12] text-white pt-16 pb-8 font-sans mt-auto" dir={dir}>
  <div class="container mx-auto px-6 max-w-7xl">
    <div class="flex flex-col lg:flex-row gap-12 lg:gap-20">
      {/* Brand & Newsletter Column (Right in RTL) */}
      <div class="lg:w-5/12 flex flex-col items-start text-start space-y-6">
        {/* Logo */}
        <div>
          <img
            src="https://hadash.org.il/support/wp-content/uploads/2025/11/HadashLogo-1024x294.png"
            alt="Hadash"
            class="h-24 object-contain bg-white px-4 py-2 rounded-lg shadow-md hover:scale-105 transition-transform"
          />
        </div>

        {/* Mission Text */}
        <p class="text-lg leading-relaxed opacity-90">
          {definitions.footerText}
        </p>

        {/* Newsletter Section */}
        <div class="w-full pt-4">
          <h3 class="font-bold text-lg mb-3">{definitions.newsletterTitle}</h3>
          <form
            class="flex gap-3 w-full"
            action="https://hadash.org.il/support/"
            method="POST"
          >
            <input type="hidden" name="post_id" value="518" />
            <input type="hidden" name="form_id" value="8f7ac33" />

            <button
              type="submit"
              class="bg-[#E2343A] hover:bg-[#c22a30] text-white px-8 py-3 rounded font-bold transition-colors whitespace-nowrap shadow-md"
            >
              {definitions.newsletterButton}
            </button>
            <input
              type="email"
              name="form_fields[email]"
              placeholder={definitions.emailPlaceholder}
              class="bg-[#3A4A43] border-none rounded px-4 py-3 text-white placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-[#E2343A] flex-grow text-start"
              required
            />
          </form>
        </div>

        {/* Social Icons */}
        <div class="flex gap-3 pt-2">
          {
            socialLinks.map((social) => (
              <a
                href={social.href}
                target="_blank"
                rel="noopener noreferrer"
                class="w-10 h-10 rounded-full bg-[#3A4A43] flex items-center justify-center hover:bg-[#E2343A] transition-all text-white shadow-sm"
              >
                <i class={`${social.icon} text-lg`} />
              </a>
            ))
          }
        </div>
      </div>

      {/* Resources & Links Column (Left in RTL) */}
      <div class="lg:w-7/12 flex flex-col justify-between space-y-10 lg:pl-10">
        {/* Top Buttons Row */}
        <div
          class="flex flex-wrap gap-4 items-center justify-start lg:justify-end"
        >
          {/* Maki Button */}
          <a
            href={resourceButtons.maki.href}
            class="bg-white hover:bg-gray-100 text-gray-900 rounded-xl px-4 py-2 flex items-center gap-3 shadow-md group transition-transform hover:-translate-y-1"
          >
            <span
              class="text-[#E2343A] w-6 h-6 flex items-center justify-center"
            >
              <svg
                viewBox="0 0 512 512"
                fill="currentColor"
                class="w-full h-full"
              >
                <path
                  d="M464 128h-48l-64 112h-42.2c-5.9-20.4-16.1-39.6-30.8-56 22.8-21.6 28.3-56.1 13.9-82.9-18.1-33.8-60.6-46.7-94.4-28.6-33.8 18.1-46.7 60.6-28.6 94.4 3.7 6.9 8.7 13.1 14.8 18.4-18.5 17.5-30.8 41.5-33.6 67.9H96c-17.7 0-32 14.3-32 32s14.3 32 32 32h53.5c-2.4 20-13.7 37.9-30.4 48.9-15.1 9.9-33.7 15.1-52.6 12.9-17.6-2-32.5 10.8-34.5 28.4-2 17.6 10.8 32.5 28.4 34.5 29.8 3.4 59.8-5.3 84.1-22.1 27.6-19.1 46.1-49.8 50.1-82.7h46.9l64 112h48c17.7 0 32-14.3 32-32s-14.3-32-32-32h-17.1l-27.4-48h43.1L492 352h20c17.7 0 32-14.3 32-32s-14.3-32-32-32h-47.5l-44.5-73.6 44.5-86.4zm-192 0c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"
                ></path>
              </svg>
            </span>
            <span class="font-bold">{resourceButtons.maki.label}</span>
          </a>

          {/* Zo HaDerekh Button */}
          <a
            href={resourceButtons.zoha.href}
            class="bg-white hover:bg-gray-100 text-[#E2343A] rounded-xl px-4 py-2 flex flex-col items-center justify-center shadow-md leading-none group transition-transform hover:-translate-y-1 min-w-[100px]"
          >
            <span class="font-black text-xl tracking-tighter">זו הדרך</span>
            {
              resourceButtons.zoha.sub && (
                <span class="text-[0.6rem] text-gray-500 uppercase tracking-widest">
                  {resourceButtons.zoha.sub}
                </span>
              )
            }
          </a>
        </div>

        {/* Contact Info Row */}
        <div
          class="flex flex-wrap gap-8 items-center justify-start lg:justify-end text-lg font-bold"
        >
          <a
            href="tel:+972535566357"
            class="flex items-center gap-2 hover:text-[#E2343A] transition-colors"
            dir="ltr"
          >
            +972 53-556-6357
            <span class="text-[#E2343A] material-symbols-outlined">call</span>
          </a>
          <a
            href="mailto:info@hadash.org.il"
            class="flex items-center gap-2 hover:text-[#E2343A] transition-colors"
          >
            info@hadash.org.il
            <span class="text-[#E2343A] material-symbols-outlined">mail</span>
          </a>
        </div>

        {/* Divider */}
        <div class="border-t border-white/10 w-full"></div>

        {/* Legal Links Row */}
        <div
          class="flex flex-wrap gap-6 items-center justify-start lg:justify-end text-sm text-gray-300"
        >
          <a
            href="https://hadash.org.il/support/%d7%aa%d7%a7%d7%a0%d7%95%d7%9f-%d7%90%d7%aa%d7%a8/"
            class="flex items-center gap-2 hover:text-white transition-colors"
          >
            {definitions.footerLinks.regulations}
            <span class="text-[#E2343A] material-symbols-outlined"
              >description</span
            >
          </a>
          <a
            href="https://hadash.org.il/support/accessibility-statement/"
            class="flex items-center gap-2 hover:text-white transition-colors"
          >
            {definitions.footerLinks.accessibility}
            <span class="text-[#E2343A] material-symbols-outlined"
              >accessible</span
            >
          </a>
          <a
            href="https://hadash.org.il/support/privacy-policy/"
            class="flex items-center gap-2 hover:text-white transition-colors"
          >
            {definitions.footerLinks.privacy}
            <span class="text-[#E2343A] material-symbols-outlined"
              >content_copy</span
            >
          </a>
        </div>
      </div>
    </div>

    {/* Bottom Copyright */}
    <div class="mt-16 text-center text-sm font-light text-gray-400">
      <p>{definitions.copyrightText}</p>
    </div>
  </div>
</footer>
